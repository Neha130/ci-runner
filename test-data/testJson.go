package test_data

const CdTriggerEventPayloadWithTaskYaml = `	{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"stageYaml":"version: 0.0.1\ncdPipelineConf:\n  - beforeStages:\n      - name: test-1\n        script: |\n          date \u003e test.report\n          echo 'hello'\n        outputLocation: ./test.report\n      - name: test-2\n        script: |\n          date \u003e test2.report\n        outputLocation: ./test2.report","artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar \u003cprakash.kumar@devtron.ai\u003e","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","prePostDeploySteps":null,"refPlugins":null,"IsDryRun": true}}`
const CdTriggerEventPayloadWithTaskYamlBad = `	{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"stageYaml":"version: 0.0.1\ncdPipelineConf:\n  - beforeStages:\n      - name: test-1\n        script: |\n          date \u003e test.report\n          echot 'hello'\n        outputLocation: ./test.report\n      - name: test-2\n        script: |\n          date \u003e test2.report\n        outputLocation: ./test2.report","artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar \u003cprakash.kumar@devtron.ai\u003e","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","prePostDeploySteps":null,"refPlugins":null}}`

const CdTriggerEventPayloadWithSteps = `{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar <prakash.kumar@devtron.ai>","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"prePostDeploySteps":[{"name":"Task 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \necho $hello\necho $appname\nmkdir /output\nexport MY_VARIABLE=\"Hello, World\" >> /output/output.txt","inputVars":[{"name":"teststring","format":"STRING","value":"hello","variableType":"VALUE"},{"name":"appname","format":"STRING","variableType":"REF_GLOBAL","referenceVariableName":"APP_NAME"}],"exposedPorts":null,"outputVars":[{"name":"MY_VARIABLE","format":"STRING","variableType":"VALUE"}],"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":["/output"],"triggerIfParentStageFail":false},{"name":"Task 2","index":2,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \necho $inputVar","inputVars":[{"name":"inputVar","format":"STRING","variableType":"REF_PRE_CI","referenceVariableName":"MY_VARIABLE","referenceVariableStepIndex":1}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":[{"conditionType":"TRIGGER","conditionOnVariable":"inputVar","conditionalOperator":"==","conditionalValue":"Hello, World"}],"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","refPlugins":null,"IsDryRun":true}}`

const CdTriggerEventPayloadWithStepsBad = `{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar <prakash.kumar@devtron.ai>","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"prePostDeploySteps":[{"name":"Task 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \necho $hello\necho $appname\nmkdir /output\nexport MY_VARIABLE=\"Hello, World\" >> /output/output.txt","inputVars":[{"name":"teststring","format":"STRING","value":"hello","variableType":"VALUE"},{"name":"appname","format":"STRING","variableType":"REF_GLOBAL","referenceVariableName":"APP_NAME"}],"exposedPorts":null,"outputVars":[{"name":"MY_VARIABLE","format":"STRING","variableType":"VALUE"}],"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":["/output"],"triggerIfParentStageFail":false},{"name":"Task 2","index":2,"stepType":"INLINE","executorType":"SHELL","script":"#!/bin/sh \nset -eo pipefail \n#set -v  ## uncomment this to debug the script \necho $inputVar","inputVars":[{"name":"inputVar","format":"STRING","variableType":"REF_PRE_CI","referenceVariableName":"MY_VARIABLE","referenceVariableStepIndex":1}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":[{"conditionType":"TRIGGER","conditionOnVariable":"inputVar","conditionalOperator":"==","conditionalValue":"Hello, World"}],"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false},{"name":"Task 3","index":3,"stepType":"INLINE","executorType":"CONTAINER_IMAGE","inputVars":null,"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"alpine:latest","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","refPlugins":null,"IsDryRun":true}}`

const CdTriggerEventPayloadWithStepsWithPlugin = `{"type":"CD","ciRequest":null,"cdRequest":{"appId":1,"envId":1,"workflowId":3,"workflowRunnerId":5,"cdPipelineId":1,"triggeredBy":2,"artifactLocation":"","ciArtifactBucket":"","ciArtifactFileName":"","ciArtifactRegion":"","ciProjectDetails":[{"gitRepository":"https://github.com/prakash100198/HelloWorldProject.git","materialName":"2-HelloWorldProject","checkoutPath":"./","fetchSubmodules":false,"commitHash":"1158832a369fdef355c67158dfad509a33c32a1d","gitTag":"","commitTime":"2023-05-30T21:07:42Z","type":"SOURCE_TYPE_BRANCH_FIXED","message":"service yaml changed port type to NodePort\n","author":"Prakash Kumar <prakash.kumar@devtron.ai>","gitOptions":{"userName":"prakash100198","password":"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","sshPrivateKey":"","accessToken":"","authMode":"USERNAME_PASSWORD"},"sourceType":"SOURCE_TYPE_BRANCH_FIXED","sourceValue":"master","WebhookData":{"Id":0,"EventActionType":"","Data":null}}],"prePostDeploySteps":[{"name":"K6 Load testing","index":1,"stepType":"REF_PLUGIN","executorType":"PLUGIN","refPluginId":1,"inputVars":[{"name":"RelativePathToScript","format":"STRING","value":"/./script.js","variableType":"VALUE","variableStepIndexInPlugin":1},{"name":"PrometheusUsername","format":"STRING","variableType":"VALUE","variableStepIndexInPlugin":1},{"name":"PrometheusApiKey","format":"STRING","variableType":"VALUE","variableStepIndexInPlugin":1},{"name":"PrometheusRemoteWriteEndpoint","format":"STRING","variableType":"VALUE","variableStepIndexInPlugin":1},{"name":"OutputType","format":"STRING","value":"LOG","variableType":"VALUE","variableStepIndexInPlugin":1}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}],"ciArtifactDTO":{"id":3,"pipelineId":1,"image":"prakash1001/test:1158832a-1-4","imageDigest":"sha256:2ee7a9baed73ee19efdcc861f0d7b4d2082f0110aa55eea77a5da7c3816c0487","materialInfo":"[{\"material\":{\"plugin-id\":\"\",\"git-configuration\":{\"url\":\"https://github.com/prakash100198/HelloWorldProject.git\"},\"scm-configuration\":{\"url\":\"\"},\"type\":\"git\"},\"changed\":true,\"modifications\":[{\"revision\":\"1158832a369fdef355c67158dfad509a33c32a1d\",\"modified-time\":\"2023-05-30T21:07:42Z\",\"data\":null,\"author\":\"Prakash Kumar \\u003cprakash.kumar@devtron.ai\\u003e\",\"message\":\"service yaml changed port type to NodePort\\n\",\"branch\":\"master\",\"webhookData\":{\"Id\":0,\"EventActionType\":\"\",\"Data\":null}}]}]","dataSource":"CI-RUNNER","workflowId":4},"namespace":"devtron-cd","workflowNamePrefix":"5-cd-1-qnw6","cdImage":"quay.io/devtron/test:624a601c-399-3961","activeDeadlineSeconds":3600,"stageType":"PRE","dockerUsername":"prakash1001","dockerPassword":"prakash@9939","awsRegion":"","secretKey":"","accessKey":"","dockerConnection":"","dockerCert":"","cdCacheLocation":"","cdCacheRegion":"","dockerRegistryType":"docker-hub","dockerRegistryURL":"docker.io","orchestratorHost":"http://devtroncd-orchestrator-service-prod.devtroncd/webhook/msg/nats","orchestratorToken":"WlNzRUtnMjdVeFdQTCsybVJHdWprM2JUaGxzPQo","isExtRun":false,"extraEnvironmentVariables":{"APP_NAME":"prakash-24june","CD_PIPELINE_CLUSTER_NAME":"default_cluster","CD_PIPELINE_ENV_NAME":"devtron-demo","GIT_COMMIT_HASH_1":"1158832a369fdef355c67158dfad509a33c32a1d","GIT_SOURCE_COUNT":"1","GIT_SOURCE_TYPE_1":"SOURCE_TYPE_BRANCH_FIXED","GIT_SOURCE_VALUE_1":"master"},"blobStorageConfigured":false,"blobStorageS3Config":null,"cloudProvider":"","azureBlobConfig":null,"gcpBlobConfig":null,"blobStorageLogsKey":"devtron/3PRE-cd-1-qnw6","inAppLoggingEnabled":false,"workflowPrefixForLog":"3PRE-cd-1-qnw6","defaultAddressPoolBaseCidr":"","defaultAddressPoolSize":0,"deploymentTriggerTime":"0001-01-01T00:00:00Z","workflowExecutor":"AWF","refPlugins":[{"id":1,"steps":[{"name":"Step 1","index":1,"stepType":"INLINE","executorType":"SHELL","script":"PathToScript=/devtroncd$RelativePathToScript\n\nif [ $OutputType == \"PROMETHEUS\" ]\nthen\n    wget https://go.dev/dl/go1.18.1.linux-amd64.tar.gz\n    rm -rf /usr/local/go && tar -C /usr/local -xzf go1.18.1.linux-amd64.tar.gz\n    export GOPATH=/usr/local/go\n    export GOCACHE=/usr/local/go/cache\n    export PATH=$PATH:/usr/local/go/bin\n    go install go.k6.io/xk6/cmd/xk6@latest\n    xk6 build --with github.com/grafana/xk6-output-prometheus-remote\n    K6_PROMETHEUS_USER=$PrometheusUsername \\\n    K6_PROMETHEUS_PASSWORD=$PrometheusApiKey \\\n    K6_PROMETHEUS_REMOTE_URL=$PrometheusRemoteWriteEndpoint \\\n    ./k6 run $PathToScript -o output-prometheus-remote\nelif [ $OutputType == \"LOG\" ]\nthen\n    docker pull grafana/k6\n\tdocker run --rm -i grafana/k6 run - <$PathToScript\nelse\n    echo \"OUTPUT_TYPE: $OutputType not supported\"\nfi","inputVars":[{"name":"RelativePathToScript","format":"STRING","variableType":"VALUE"},{"name":"PrometheusUsername","format":"STRING","variableType":"VALUE"},{"name":"PrometheusApiKey","format":"STRING","variableType":"VALUE"},{"name":"PrometheusRemoteWriteEndpoint","format":"STRING","variableType":"VALUE"},{"name":"OutputType","format":"STRING","variableType":"VALUE"}],"exposedPorts":null,"outputVars":null,"triggerSkipConditions":null,"successFailureConditions":null,"dockerImage":"","command":"","args":null,"customScriptMount":null,"sourceCodeMount":null,"extraVolumeMounts":null,"artifactPaths":null,"triggerIfParentStageFail":false}]}],"IsDryRun":true}}`
